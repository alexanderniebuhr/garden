@import "tailwindcss";

@theme {
	/* Fluid space — Utopia-inspired (320px → 1280px, vi units) */
	--spacing-fluid-xs: clamp(0.75rem, 0.667rem + 0.417vi, 1rem);
	--spacing-fluid-s: clamp(1rem, 0.833rem + 0.833vi, 1.5rem);
	--spacing-fluid-m: clamp(1.5rem, 1.167rem + 1.667vi, 2.5rem);
	--spacing-fluid-l: clamp(2rem, 1.667rem + 1.667vi, 3rem);
	--spacing-fluid-gutter: clamp(1rem, 0.667rem + 1.667vi, 2rem);

	/* Fluid type — modular scale */
	--font-size-fluid-heading: clamp(1.875rem, 1.75rem + 0.625vi, 2.25rem);
	--font-size-fluid-heading--line-height: 1.2;
}

@media (prefers-reduced-motion: no-preference) {
	@view-transition {
		navigation: auto;
	}
}

/* Custom prose styles — replaces @tailwindcss/typography */
.prose {
	color: var(--color-neutral-800);
	line-height: 1.75;
	font-size: 1rem;

	@media (prefers-color-scheme: dark) {
		color: var(--color-neutral-200);
	}

	/* --- Headings --- */
	& h1 {
		font-size: 2.25em;
		font-weight: 800;
		margin-top: 0;
		margin-bottom: 0.889em;
		line-height: 1.1;
		color: var(--color-neutral-900);

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	& h2 {
		font-size: 1.5em;
		font-weight: 700;
		margin-top: 2em;
		margin-bottom: 1em;
		line-height: 1.33;
		color: var(--color-neutral-900);

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	& h3 {
		font-size: 1.25em;
		font-weight: 600;
		margin-top: 1.6em;
		margin-bottom: 0.6em;
		line-height: 1.6;
		color: var(--color-neutral-900);

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	& h4 {
		font-size: 1em;
		font-weight: 600;
		margin-top: 1.5em;
		margin-bottom: 0.5em;
		line-height: 1.5;
		color: var(--color-neutral-900);

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	/* --- Paragraph & spacing --- */
	& p {
		margin-top: 1.25em;
		margin-bottom: 1.25em;
	}

	/* --- Links --- */
	& a {
		color: var(--color-neutral-900);
		text-decoration: underline;
		text-underline-offset: 3px;
		font-weight: 500;

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	/* --- Strong / emphasis --- */
	& strong {
		color: var(--color-neutral-900);
		font-weight: 600;

		@media (prefers-color-scheme: dark) {
			color: var(--color-white);
		}
	}

	/* --- Lists --- */
	& ol {
		list-style-type: decimal;
		margin-top: 1.25em;
		margin-bottom: 1.25em;
		padding-inline-start: 1.625em;
	}

	& ul {
		list-style-type: disc;
		margin-top: 1.25em;
		margin-bottom: 1.25em;
		padding-inline-start: 1.625em;
	}

	& li {
		margin-top: 0.5em;
		margin-bottom: 0.5em;
	}

	& ol > li,
	& ul > li {
		padding-inline-start: 0.375em;
	}

	& ul ul,
	& ul ol,
	& ol ul,
	& ol ol {
		margin-top: 0.75em;
		margin-bottom: 0.75em;
	}

	/* --- Blockquotes --- */
	& blockquote {
		font-weight: 500;
		font-style: italic;
		color: var(--color-neutral-900);
		border-inline-start: 0.25rem solid var(--color-neutral-300);
		margin-top: 1.6em;
		margin-bottom: 1.6em;
		padding-inline-start: 1em;

		@media (prefers-color-scheme: dark) {
			color: var(--color-neutral-100);
			border-inline-start-color: var(--color-neutral-700);
		}
	}

	& blockquote p:first-of-type::before {
		content: open-quote;
	}

	& blockquote p:last-of-type::after {
		content: close-quote;
	}

	/* --- Horizontal rule --- */
	& hr {
		border-color: var(--color-neutral-300);
		margin-top: 3em;
		margin-bottom: 3em;

		@media (prefers-color-scheme: dark) {
			border-color: var(--color-neutral-700);
		}
	}

	/* --- Code (inline) --- */
	& :not(pre) > code {
		font-size: 0.875em;
		font-weight: 600;
		color: var(--color-neutral-900);
		background-color: var(--color-neutral-100);
		padding: 0.2em 0.4em;
		border-radius: 0.25rem;

		@media (prefers-color-scheme: dark) {
			color: var(--color-neutral-200);
			background-color: var(--color-neutral-800);
		}
	}

	/* --- Code blocks (pre) --- */
	& pre {
		overflow-x: auto;
		font-size: 0.875em;
		line-height: 1.714;
		margin-top: 1.714em;
		margin-bottom: 1.714em;
		border-radius: 0.375rem;
		padding: 0.857em 1.143em;
		color: var(--color-neutral-200);
		background-color: var(--color-neutral-800);

		@media (prefers-color-scheme: dark) {
			background-color: var(--color-neutral-900);
		}
	}

	& pre code {
		background-color: transparent;
		border-width: 0;
		border-radius: 0;
		padding: 0;
		font-weight: inherit;
		color: inherit;
		font-size: inherit;
		font-family: inherit;
		line-height: inherit;
	}

	/* --- Images --- */
	& img {
		margin-top: 2em;
		margin-bottom: 2em;
	}

	/* --- Video --- */
	& video {
		margin-top: 2em;
		margin-bottom: 2em;
	}

	/* --- Figure --- */
	& figure {
		margin-top: 2em;
		margin-bottom: 2em;
	}

	& figure > * {
		margin-top: 0;
		margin-bottom: 0;
	}

	& figcaption {
		color: var(--color-neutral-500);
		font-size: 0.875em;
		line-height: 1.43;
		margin-top: 0.857em;

		@media (prefers-color-scheme: dark) {
			color: var(--color-neutral-400);
		}
	}

	/* --- Tables --- */
	& table {
		width: 100%;
		table-layout: auto;
		text-align: start;
		margin-top: 2em;
		margin-bottom: 2em;
		font-size: 0.875em;
		line-height: 1.714;
	}

	& thead {
		border-bottom: 1px solid var(--color-neutral-300);

		@media (prefers-color-scheme: dark) {
			border-bottom-color: var(--color-neutral-600);
		}
	}

	& thead th {
		color: var(--color-neutral-900);
		font-weight: 600;
		vertical-align: bottom;
		padding-inline: 0.571em;
		padding-bottom: 0.571em;

		@media (prefers-color-scheme: dark) {
			color: var(--color-neutral-100);
		}
	}

	& thead th:first-child {
		padding-inline-start: 0;
	}

	& thead th:last-child {
		padding-inline-end: 0;
	}

	& tbody tr {
		border-bottom: 1px solid var(--color-neutral-200);

		@media (prefers-color-scheme: dark) {
			border-bottom-color: var(--color-neutral-700);
		}
	}

	& tbody tr:last-child {
		border-bottom-width: 0;
	}

	& tbody td {
		vertical-align: baseline;
		padding: 0.571em;
	}

	& tbody td:first-child {
		padding-inline-start: 0;
	}

	& tbody td:last-child {
		padding-inline-end: 0;
	}

	& tfoot {
		border-top: 1px solid var(--color-neutral-300);

		@media (prefers-color-scheme: dark) {
			border-top-color: var(--color-neutral-600);
		}
	}

	& tfoot td {
		vertical-align: top;
		padding: 0.571em;
	}

	/* --- First & last child margin collapse --- */
	& > :first-child {
		margin-top: 0;
	}

	& > :last-child {
		margin-bottom: 0;
	}
}
